
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../07_llm_solutions/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Case Example Transaction Reconciliation - Prompt Engineering Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#case-example-transaction-reconciliation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Prompt Engineering Guide" class="md-header__button md-logo" aria-label="Prompt Engineering Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Prompt Engineering Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Case Example Transaction Reconciliation
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Prompt Engineering Guide" class="md-nav__button md-logo" aria-label="Prompt Engineering Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Prompt Engineering Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../01_natural_language_processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Natural Language Processing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_large_language_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Large Language Models
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_rag_embedding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RAG, Embedding and Vector Databases
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_prompt_engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompt Engineering
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_ai_applications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI Applications
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_ai_agent_langchain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI Agents using LangChain
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_llm_solutions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM Solutions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Case Example Transaction Reconciliation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Case Example Transaction Reconciliation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#account-ledger-reconciliation" class="md-nav__link">
    <span class="md-ellipsis">
      Account ledger reconciliation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation-and-aims-for-ai-automation" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation and aims for AI automation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ai-rpa-augmented-design" class="md-nav__link">
    <span class="md-ellipsis">
      AI RPA Augmented design
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconciliation-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Reconciliation workflow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reconciliation workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#00-application-load" class="md-nav__link">
    <span class="md-ellipsis">
      00 Application load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#01-statement-upload" class="md-nav__link">
    <span class="md-ellipsis">
      01 Statement upload
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02-statement-db-load" class="md-nav__link">
    <span class="md-ellipsis">
      02 Statement DB load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03-transaction-matching" class="md-nav__link">
    <span class="md-ellipsis">
      03 Transaction matching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04-repair-edits-list" class="md-nav__link">
    <span class="md-ellipsis">
      04 Repair edits list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#05-agent-session-review" class="md-nav__link">
    <span class="md-ellipsis">
      05 Agent session review
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#06-training-feedback" class="md-nav__link">
    <span class="md-ellipsis">
      06 Training feedback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#07-session-close" class="md-nav__link">
    <span class="md-ellipsis">
      07 Session close
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Application Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tech-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Tech stack
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-snippet-session-orchestration" class="md-nav__link">
    <span class="md-ellipsis">
      Code Snippet Session Orchestration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Other use cases
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#account-ledger-reconciliation" class="md-nav__link">
    <span class="md-ellipsis">
      Account ledger reconciliation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#motivation-and-aims-for-ai-automation" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation and aims for AI automation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ai-rpa-augmented-design" class="md-nav__link">
    <span class="md-ellipsis">
      AI RPA Augmented design
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconciliation-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      Reconciliation workflow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reconciliation workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#00-application-load" class="md-nav__link">
    <span class="md-ellipsis">
      00 Application load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#01-statement-upload" class="md-nav__link">
    <span class="md-ellipsis">
      01 Statement upload
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02-statement-db-load" class="md-nav__link">
    <span class="md-ellipsis">
      02 Statement DB load
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03-transaction-matching" class="md-nav__link">
    <span class="md-ellipsis">
      03 Transaction matching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04-repair-edits-list" class="md-nav__link">
    <span class="md-ellipsis">
      04 Repair edits list
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#05-agent-session-review" class="md-nav__link">
    <span class="md-ellipsis">
      05 Agent session review
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#06-training-feedback" class="md-nav__link">
    <span class="md-ellipsis">
      06 Training feedback
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#07-session-close" class="md-nav__link">
    <span class="md-ellipsis">
      07 Session close
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Application Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tech-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Tech stack
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-snippet-session-orchestration" class="md-nav__link">
    <span class="md-ellipsis">
      Code Snippet Session Orchestration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Other use cases
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="case-example-transaction-reconciliation">Case Example: Transaction reconciliation</h1>
<h2 id="account-ledger-reconciliation">Account ledger reconciliation</h2>
<p>The aim of the reconciliation process is to reconcile two account ledgers at a transaction level:</p>
<ul>
<li><strong>source of truth</strong>: actual bank statements, which is always lagging due to the limitation of manual MFA for statement downloading. The actual bank statements lack tagging to user specific categories, budget accounts and taxonomy.</li>
<li><strong>digital twin</strong>: a user specific ledger, updated in real-time, with transactions tagged with user data model taxonomy.</li>
</ul>
<h2 id="motivation-and-aims-for-ai-automation">Motivation and aims for AI automation</h2>
<p>The motivation for automating with AI:</p>
<ul>
<li>Current process is <ul>
<li>labor intensive, time-consuming</li>
<li>Subject to human-error, fatigue</li>
</ul>
</li>
<li>Largely deterministic and structured, making it a good candidate for AI-assisted automation</li>
</ul>
<h2 id="ai-rpa-augmented-design">AI RPA Augmented design</h2>
<ul>
<li>LLMs complement, rather than replace, deterministic RPA</li>
<li>Hybrid scoring (similarity + classification) balances flexibility and accuracy</li>
<li>RAG-style repair suggestion helps bridge edge cases</li>
<li>Manual override is essential for ambiguous or business-critical cases</li>
<li>Session orchestrators using LangChain can manage multi-step workflows</li>
<li>Feedback loop enables continual improvement of all agents</li>
</ul>
<h2 id="reconciliation-workflow">Reconciliation workflow</h2>
<ul>
<li>Application load</li>
<li>Statement load to DB</li>
<li>Pre-processing</li>
<li>Transaction matching</li>
<li>Repair edits</li>
<li>Review feedback</li>
<li>Application close</li>
</ul>
<pre class="mermaid"><code>graph TD
  A[**User** Login &amp; Dashboard] --&gt; B[**User** Statement Upload]
  B --&gt; C[**RPA** Parse &amp; Load to DB]
  C --&gt; D[Preprocessing]
  D --&gt; D1[**RPA** Input validation]
  D --&gt; D2[**LLM Agent** sanitation check]
  D --&gt; D3[**RPA** custom pre-processing]
  D1 --&gt; E[Hybrid Transaction Matching]
  D2 --&gt; E
  D3 --&gt; E
  E --&gt; K1[**RPA** Similarity Score]
  E --&gt; K2[**ML** Trained Classifier Score]
  K1 --&gt; L[**RPA** Weighted Match Score]
  K2 --&gt; L
  L --&gt; F[Generate Repair Edits]
  F --&gt; G1[**RPA** Repair]
  F --&gt; G2[**LLM Agent** Repair]
  F --&gt; G3[**User** Repair]
  G1 --&gt; H[**LLM Agent** Session Review]
  G2 --&gt; H
  G3 --&gt; H
  H --&gt; I[**RPA** Training Feedback]
  I --&gt; J[**RPA** Session Close &amp; Report Update]</code></pre>
<h3 id="00-application-load">00 Application load</h3>
<p>The user logs in to the application and begins a new session, the state is updated and the application detects the current state and status of reconciliations by month and account. The application guides the user to next steps and issues to resolve if any</p>
<h3 id="01-statement-upload">01 Statement upload</h3>
<p>User manually downloads statements as either PDF or Excel compatible (.csv, .xlsx) file format from the bank authenticated using MFA and uploads them using a file uploader UI feature that drops the files to a designated cloud storage location such as an AWS S3 bucket </p>
<h3 id="02-statement-db-load">02 Statement DB load</h3>
<p>Robotic Process Automation (RPA) ingests, parses the statements, performs cleanup and formatting and uploads the transaction data to a structured SQL database. </p>
<p><strong>AI enhancement</strong> Although a fully RPA process without LLM may suffice for well structured statements, this process could optionally be enhanced with pre and post processing steps added with an LLM Agent to perform pre-upload checks and to review and resolve any processing errors in the first pass statement ingestion. </p>
<p><strong>Database</strong> The database can take many types of forms. On AWS, for example, could include RDS, Aurora or even an SQLite DB stored in S3 bucket</p>
<h3 id="03-transaction-matching">03 Transaction matching</h3>
<p>The transaction matching is the main reconciliation workflow and can include multiple passes and methods, and update with learning as the program is exposed and trained from user input from past reconcilation cases.</p>
<p><strong>Input validation pre-processing</strong> RPA process performs basic pre-processing input validation for easily detectable data integrity issues such as NULL values in non-NULL fields, duplicate transactions or empty ledgers.</p>
<p><strong>LLM Agent sanitation pre-processing</strong> LLM Agent has a peek at the data to check for potential problematic cases, perform custom clean-up, formatting, tagging and pre-formatting transactions or run pre-defined clean-up operations not yet built into the RPA pre-processing.</p>
<p><strong>RPA Special cases pre-processing</strong> Custom pre-processing runs first by RPA process for pre-defined known special cases involving recurring transaction pairs and difficult to handle cases of many-to-many transaction pairs that have been either learned or manually defined by the user.</p>
<p><strong>transaction pre-processing</strong>: Individual transactions are pre-processed with standard NLP processing to format into standard features [date, account, amount, status, currency, payee, description] remove stopwords, POS tagging, lemmatization, and custom tagging from user-specific model (learned + user-defined)</p>
<p><strong>Hybrid classification model</strong>: transaction pairs are classified from a hybrid similarity match (no training required) + trained model as either matched or not [0, 1]. The two models (similarity, trained) generate independent scores and the final score is taken as a weighted combination of the two component scores. Over time, the weight of the trained model can be dynamically incremented as accuracy improvement from exposure to more use cases.</p>
<p><strong>Similarity model</strong>: The similarity model can utilize different methods of similarity matching, each with different trade-offs of computational cost and accuracy. Simple token matching can be performed at high speed and low computational costs, whereas sentence embedding, BERT models can add accuracy boost with a noticeable trade-off in computational costs.</p>
<p><strong>Trained classification model</strong>: There are many types of standard classification models with Decision tree and Random Forest a good first choice and Neural Networks and Multi-Layered Neural Networks as advanced options.</p>
<h3 id="04-repair-edits-list">04 Repair edits list</h3>
<p>A list of repair edits is generated that will close the reconciliation gap between the ending balance between the reference source-of-truth and the digital twin ledgers.  Each transaction edit is either a REMOVE, ADD or UPDATE.  One fail-safe method for ensuring the process will always generate a solution is to begin with a naive set of edits: REMOVE ALL digital twin txns, ADD ALL source-of-truth, and then remove known matched transactions from the prior transaction matching step pair-wise that sum to zero, ensuring that each step of removed matched transactions preserves the condition of matched ending balance between source-of-truth and digital twin.</p>
<p><strong>RPA repair</strong>: An RPA process can automatically process repair edits to the digital twin some limited cases of qualified RPA-allowed repairs. Examples of allowed cases may include only amount update by &lt; +/- some threshold amount, or for foreign currency transactions or variable bills which are expected to vary from a range of expected amount in some range.</p>
<p><strong>LLM Agent review</strong>: An LLM Agent can review the residual edits and follow a set of guidelines to apply repairs not caught by the RPA process, and for residual repairs to propose edits to the user which do not meet the guidelines for Agent repair. These guidelines can be seeded by the user and updated with learning and feedback by the AI Agent.</p>
<p><strong>Manual repair</strong>: For any residual edits that do not qualify for either RPA or Agent repair, the user is prompted to manually repair either by manually matching transaction with instruction to update the digital twin to match the source-of-truth amount, or by manually updating the digital twin transaction. For example, in case where the transactions were not matched due to a miss-spelling or incorrect transaction category tagging, the user may decide to update the tag and regeneration the edits list in order to prevent corruption of the training model by feeding it bad training feedback cases.  </p>
<h3 id="05-agent-session-review">05 Agent session review</h3>
<p>An LLM Agent is prompted with the session details, and plans workflow for model, guideline updates.</p>
<h3 id="06-training-feedback">06 Training feedback</h3>
<p>The complete set of matched transactions and edit repairs is stored to train each of the models involved, the classifier, the RPA repair and the LLM Agent guide, with specific workflows triggered by the output of the Agent session review.</p>
<h3 id="07-session-close">07 Session close</h3>
<p>The downstream reports are updated from the updated digital twin and the session status is updated as closed. Any cleanup and logging are recorded to log and record session activity.</p>
<h2 id="application-architecture">Application Architecture</h2>
<p><strong>Frontend</strong>:</p>
<ul>
<li>User dashboard</li>
<li>File upload UI (PDF/CSV/XLSX)</li>
<li>Manual repair UI for unmatched or uncertain items</li>
</ul>
<p><strong>Session Orchestrator</strong>:</p>
<ul>
<li>Maintains session state</li>
<li>Plans workflows</li>
<li>Routes feedback to the right learning modules (Classifier, LLM agent, RPA)</li>
</ul>
<p><strong>Model Trainer</strong>:</p>
<ul>
<li>incorprates feedback to train and tune models</li>
</ul>
<p><strong>Backend</strong> Functional Modules:</p>
<ul>
<li>RPA Parser: Parses bank statements</li>
<li>Data Loader: Uploads structured transactions to SQL DB</li>
<li>Digital twin API: CRUD DB operations to Digital Twin DB</li>
</ul>
<p><strong>Preprocessing Engine</strong>:</p>
<ul>
<li>RPA input validation</li>
<li>LLM sanitation and formatting</li>
<li>Special-case handlers</li>
</ul>
<p><strong>Matching Engine</strong>:</p>
<ul>
<li>Similarity-based matcher (token, embedding, BERT)</li>
<li>Trained classifier (Random Forest / MLP)</li>
<li>weighted score fusion module</li>
<li>weight adapter from experience + classification accuracy</li>
</ul>
<p><strong>Repair Engine</strong>:</p>
<ul>
<li>Deduces minimal edit set to align ledgers</li>
<li>RPA auto-fixes</li>
<li>LLM repair agent</li>
<li>Manual override</li>
</ul>
<h2 id="tech-stack">Tech stack</h2>
<ul>
<li><strong>Cloud</strong>: GitHub, AWS S3, EC2, Lambda</li>
<li><strong>Database</strong>: Aurora PostgreSQL or SQLite in S3</li>
<li><strong>Embedding Model</strong>: all-MiniLM-L6-v2</li>
<li><strong>Vector Store</strong>: FAISS or Qdrant</li>
<li><strong>LLM Orchestration</strong>: LangChain agent with tool access and session controller</li>
<li><strong>Document loader</strong>: PyPDF, CSV parser, or structured ingest from databases</li>
</ul>
<h2 id="code-snippet-session-orchestration">Code Snippet Session Orchestration</h2>
<p>This snippet provides a simplified conceptual overview of the overall orchestration and not an actual implementation source code</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">langchain.agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentExecutor</span><span class="p">,</span> <span class="n">initialize_agent</span><span class="p">,</span> <span class="n">Tool</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">langchain.agents.agent_types</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentType</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">langchain.llms</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">session_utils</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Step 1: Define tools the agent can use</span>
<span class="n">tools</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;load_ledger&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">load_user_ledger</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Load user ledger&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;load_bank_stmt&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">load_bank_statement</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Load bank statement&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;preprocess&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">preprocess</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Preprocess both ledgers&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;match_txns&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">match_txns</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Match transactions&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;generate_repairs&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">generate_repairs</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generate repair edits&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;rpa_repair&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">run_rpa_repairs</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Run RPA repairs&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;llm_repair&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">run_llm_repairs</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Run LLM repairs&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;manual_review&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">manual_review</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Prompt user for unmatched transactions&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;check_balances&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">check_balances</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Check if ledgers are reconciled&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;process_feedback&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">process_feedback</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Log and route feedback&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;update_model&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">update_model</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Update models with feedback&quot;</span><span class="p">),</span>
    <span class="n">Tool</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;close_session&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">close_session</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Close the reconciliation session&quot;</span><span class="p">),</span>
<span class="p">]</span>

<span class="c1"># Step 2: Build the agent</span>
<span class="n">llm</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span><span class="n">temperature</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">initialize_agent</span><span class="p">(</span>
    <span class="n">tools</span><span class="p">,</span>
    <span class="n">llm</span><span class="p">,</span>
    <span class="n">agent</span><span class="o">=</span><span class="n">AgentType</span><span class="o">.</span><span class="n">ZERO_SHOT_REACT_DESCRIPTION</span><span class="p">,</span>
    <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="c1"># Step 3: Execute</span>
<span class="n">agent</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="s2">&quot;Begin a session and reconcile the two ledgers. Continue until complete.&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="other-use-cases">Other use cases</h2>
<ol>
<li>Case complaint classification</li>
<li>Job search profile matching</li>
<li>Personal finances coach</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>